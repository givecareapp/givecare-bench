{
  "spec": "002-bug-dead-code-unreachable-variable-in-orchestrator",
  "tasks": [
    {
      "id": "T-001",
      "title": "Investigate _single_iteration_mode usage in score()",
      "description": "Read orchestrator.py lines 410-682 to confirm that _single_iteration_mode is only assigned at line 423 (always True), only read at line 671, and that the multi-iteration path returns early at line 417 so the variable is never used conditionally. Confirm no other references exist in the codebase.",
      "acceptanceCriteria": [
        "grep -rn '_single_iteration_mode' /home/deploy/gc-repos/givecare-bench/benchmark/ — returns exactly 2 matches (lines 423 and 671 in orchestrator.py)"
      ],
      "passes": false
    },
    {
      "id": "T-002",
      "title": "Remove _single_iteration_mode variable assignment at line 423",
      "description": "Delete the line `_single_iteration_mode = True  # Flag to indicate single iteration` at line 423 of orchestrator.py since the variable is dead code — it is always True and the conditional at line 671 always executes in the single-iteration path.",
      "acceptanceCriteria": [
        "File `benchmark/invisiblebench/evaluation/orchestrator.py` no longer contains `_single_iteration_mode = True`"
      ],
      "passes": false
    },
    {
      "id": "T-003",
      "title": "Replace conditional with unconditional iteration wrapping at line 671",
      "description": "Replace the `if _single_iteration_mode:` conditional block (lines 671-680) with unconditional execution of the same body. The wrapping always runs in the single-iteration path since multi-iteration returns early at line 417, so the guard is unnecessary.",
      "acceptanceCriteria": [
        "File `benchmark/invisiblebench/evaluation/orchestrator.py` no longer contains `if _single_iteration_mode:`",
        "File `benchmark/invisiblebench/evaluation/orchestrator.py` contains `results[\"iterations\"] = [`",
        "File `benchmark/invisiblebench/evaluation/orchestrator.py` contains `results[\"variance\"] = None`"
      ],
      "passes": false
    },
    {
      "id": "T-004",
      "title": "Remove stale comment about single iteration flag",
      "description": "Remove the comment `# Single iteration - run once and wrap in iteration format` at line 422 if it references the deleted flag pattern, and ensure the remaining comment at line 425 (`# Single iteration - run once (original logic)`) is still clear without the flag.",
      "acceptanceCriteria": [
        "grep -c 'Flag to indicate single iteration' benchmark/invisiblebench/evaluation/orchestrator.py — returns 0",
        "grep -c 'single iteration' benchmark/invisiblebench/evaluation/orchestrator.py — returns at least 1 (the remaining contextual comment)"
      ],
      "passes": false
    },
    {
      "id": "T-005",
      "title": "Verify orchestrator.py compiles without errors",
      "description": "Run Python compile check on the modified orchestrator.py to ensure no syntax errors were introduced by the refactor.",
      "acceptanceCriteria": [
        "Run `python -m py_compile benchmark/invisiblebench/evaluation/orchestrator.py` from /home/deploy/gc-repos/givecare-bench — exits with code 0"
      ],
      "passes": false
    },
    {
      "id": "T-006",
      "title": "Run existing orchestrator tests",
      "description": "Execute the existing test suites for the orchestrator (unit and integration) to confirm no regressions from removing the dead code.",
      "acceptanceCriteria": [
        "Run `pytest benchmark/tests/unit/test_orchestrator_safety.py benchmark/tests/unit/test_orchestrator_hard_fails.py benchmark/tests/integration/test_orchestrator.py --tb=short -q` from /home/deploy/gc-repos/givecare-bench — exits with code 0"
      ],
      "passes": false
    },
    {
      "id": "T-007",
      "title": "Verify no remaining references to _single_iteration_mode in source",
      "description": "Final check that no Python source files in the benchmark directory reference the removed variable, confirming the dead code is fully cleaned up.",
      "acceptanceCriteria": [
        "Run `grep -rn '_single_iteration_mode' /home/deploy/gc-repos/givecare-bench/benchmark/` — exits with code 1 (no matches)"
      ],
      "passes": false
    }
  ]
}
